{% extends 'BlackRookTaskBundle::layout.html.twig' %}
{% block body %}

<h1>Task <small>&mdash; <a href="{{ path('edit_task', { 'id': entity.id }) }}">Edit</a></small></h1>

<table class="record_properties">
    <tbody>
        <tr>
            <th>Id</th> 
            <td>{{ entity.id }}</td>
        </tr>
        <tr>
            <th>Name</th>
            <td>{{ entity.name }}</td>
        </tr>
        <tr>
            <th>Description</th>
            <td>{{ entity.description }}</td>
        </tr>
        <tr>
            <th>Assignees</th>
            <td>{% for user in entity.assignees %}
                {{ user.username }}
                {% if loop.last == false %},{% endif %}
                {% endfor %}
            </td>
        </tr>
        <tr>
            <th>Due At</th>
            <td>{% if entity.dueAt %}{{ entity.dueAt|date('Y-m-d H:i:s') }}{% endif %}</td>
        </tr>
        <tr>
            <th>Start At</th>
            <td>{% if entity.startAt %}{{ entity.startAt|date('Y-m-d H:i:s') }}{% endif %}</td>
        </tr>
        <tr>
            <th>Completed At</th>
            <td>{% if entity.completedAt %}{{ entity.completedAt|date('Y-m-d H:i:s') }}{% endif %}</td>
        </tr>
        <tr>
            <th>Lft</th>
            <td>{{ entity.lft }}</td>
        </tr>
        <tr>
            <th>Rgt</th>
            <td>{{ entity.rgt }}</td>
        </tr>
        <tr>
            <th>Root</th>
            <td>{{ entity.root }}</td>
        </tr>
        <tr>
            <th>Lvl</th>
            <td>{{ entity.lvl }}</td>
        </tr>
        <tr>
            <th>Estimated Duration</th>
            <td>{{ entity.estimatedDuration }}</td>
        </tr>
        <tr>
            <th>Duration</th>
            <td>{{ entity.duration }}</td>
        </tr>
        <tr>
            <th>Duration in hours</th>
            <td>{{ entity.duration|secondsToHuman() }}</td>
        </tr>
    </tbody>
</table>

<h3>Activities</h3>
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Description</th>
            <th>Duration</th>
            <th>Duration in hours</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for activity in entity.activities %}
        <tr>
            <th>{{ activity.id }}</th>
            <td>{{ activity.description }}</td>
            <td>{{ activity.duration }}</td>
            <td>{{ activity.duration|secondsToHuman() }}</td>
            <td><a href="{{ path('activity_edit', { 'id': activity.id }) }}">Edit</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>


{% endblock body %}